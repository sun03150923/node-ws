const _0x258716=_0x5270;(function(_0x1225a6,_0x39ddc4){const _0x9d91a4=_0x5270,_0x262927=_0x1225a6();while(!![]){try{const _0x5ed714=parseInt(_0x9d91a4(0x167))/0x1+-parseInt(_0x9d91a4(0xfc))/0x2+parseInt(_0x9d91a4(0x155))/0x3*(-parseInt(_0x9d91a4(0x16f))/0x4)+parseInt(_0x9d91a4(0x164))/0x5+-parseInt(_0x9d91a4(0x152))/0x6+-parseInt(_0x9d91a4(0x11f))/0x7*(-parseInt(_0x9d91a4(0x160))/0x8)+-parseInt(_0x9d91a4(0x140))/0x9*(-parseInt(_0x9d91a4(0x16d))/0xa);if(_0x5ed714===_0x39ddc4)break;else _0x262927['push'](_0x262927['shift']());}catch(_0x176e0d){_0x262927['push'](_0x262927['shift']());}}}(_0x17fb,0x4514e));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x258716(0x138)),net=require('net'),path=require(_0x258716(0x13a)),crypto=require(_0x258716(0x170)),{Buffer}=require(_0x258716(0x134)),{exec,execSync}=require(_0x258716(0x150)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||'602aaa47-729f-4c37-87e3-72627f1e3364',NEZHA_SERVER=process['env'][_0x258716(0x112)]||'',NEZHA_PORT=process[_0x258716(0x144)][_0x258716(0x14b)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process['env'][_0x258716(0x116)]||'1234.abc.com',AUTO_ACCESS=process[_0x258716(0x144)]['AUTO_ACCESS']||!![],WSPATH=process[_0x258716(0x144)][_0x258716(0x159)]||UUID[_0x258716(0x132)](0x0,0x8),SUB_PATH=process['env'][_0x258716(0x102)]||_0x258716(0x15b),NAME=process[_0x258716(0x144)]['NAME']||'',PORT=process[_0x258716(0x144)][_0x258716(0x11c)]||0x1eb4;function _0x17fb(){const _0x3177b3=['length','NEZHA_SERVER','https://oooo.serv00.net/add-url','Server\x20is\x20running\x20on\x20port\x20','pop','DOMAIN','utf8','sha224','map','createServer','https://dns.google/resolve?name=','PORT','isp','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','22435SRCPgm','\x20with\x20all\x20DNS\x20servers','&fp=chrome&type=ws&host=','setsid\x20nohup\x20./npm\x20-s\x20','\x20-p\x20','join','includes','application/json','close','end','Hello\x20world!','arm64','Answer','Not\x20Found\x0a','vless://','writeFileSync',':443?encryption=none&security=tls&sni=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','application/dns-json','slice','arch','buffer','decode','base64','npm\x20running\x20error:','axios','1.1.1.1','path','readUInt8','hex','concat','npm\x20is\x20running','toString','9GRrkSZ','2053','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','writeHead','env','Automatic\x20Access\x20Task\x20added\x20successfully','aarch64','Failed\x20to\x20resolve\x20','index.html','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm\x20download\x20successfully','NEZHA_PORT','unlink','replace','https://arm64.ssss.nyc.mn/v1','catch','child_process','error','3194412GAiEQG','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','update','27XXyLho','false','stream','readUInt16BE','WSPATH','text/plain','sz03150923','text/html','--tls','listen','country_code','536skxjJG','https://api.ip.sb/geoip','https://','every','2413970UsUQdM','connect','config.yaml','352812BwNWLF','&path=%2F','url','trim','chmod\x20+x\x20npm','true','4458950cqbWQx','message','195236EcMmnq','crypto','reduce','483190DtpSlz','https://arm64.ssss.nyc.mn/agent','send','once','npm\x20is\x20already\x20running,\x20skip\x20running...','write','SUB_PATH','substr','log','get','createHash','finish','pipe','https://amd64.ssss.nyc.mn/v1','data','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','readFile','2083','type','then','Status'];_0x17fb=function(){return _0x3177b3;};return _0x17fb();}let ISP='';const GetISP=async()=>{const _0x52b7fa=_0x258716;try{const _0x275105=await axios[_0x52b7fa(0x105)](_0x52b7fa(0x161)),_0x413048=_0x275105[_0x52b7fa(0x10a)];ISP=(_0x413048[_0x52b7fa(0x15f)]+'-'+_0x413048[_0x52b7fa(0x11d)])[_0x52b7fa(0x14d)](/ /g,'_');}catch(_0x43b76e){ISP='Unknown';}};GetISP();const httpServer=http[_0x258716(0x11a)]((_0x5cad24,_0x305033)=>{const _0x3f051f=_0x258716;if(_0x5cad24[_0x3f051f(0x169)]==='/'){const _0x28affc=path[_0x3f051f(0x124)](__dirname,_0x3f051f(0x148));fs[_0x3f051f(0x10c)](_0x28affc,_0x3f051f(0x117),(_0x391cf0,_0x4c6710)=>{const _0x234fbf=_0x3f051f;if(_0x391cf0){_0x305033[_0x234fbf(0x143)](0xc8,{'Content-Type':_0x234fbf(0x15c)}),_0x305033[_0x234fbf(0x128)](_0x234fbf(0x129));return;}_0x305033['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x305033[_0x234fbf(0x128)](_0x4c6710);});return;}else{if(_0x5cad24[_0x3f051f(0x169)]==='/'+SUB_PATH){const _0x220ea3=NAME?NAME+'-'+ISP:ISP,_0x1a83fb=_0x3f051f(0x12d)+UUID+'@'+DOMAIN+_0x3f051f(0x12f)+DOMAIN+_0x3f051f(0x121)+DOMAIN+_0x3f051f(0x168)+WSPATH+'#'+_0x220ea3,_0x46772e='trojan://'+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x3f051f(0x168)+WSPATH+'#'+_0x220ea3,_0x4b4790=_0x1a83fb+'\x0a'+_0x46772e,_0x4abc94=Buffer['from'](_0x4b4790)[_0x3f051f(0x13f)](_0x3f051f(0x136));_0x305033[_0x3f051f(0x143)](0xc8,{'Content-Type':'text/plain'}),_0x305033[_0x3f051f(0x128)](_0x4abc94+'\x0a');}else _0x305033[_0x3f051f(0x143)](0x194,{'Content-Type':_0x3f051f(0x15a)}),_0x305033[_0x3f051f(0x128)](_0x3f051f(0x12c));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x258716(0x14d)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x258716(0x139)];function _0x5270(_0x24b436,_0x1befda){const _0x17fb59=_0x17fb();return _0x5270=function(_0x527051,_0x496f7c){_0x527051=_0x527051-0xfc;let _0x56a157=_0x17fb59[_0x527051];return _0x56a157;},_0x5270(_0x24b436,_0x1befda);}function resolveHost(_0x2b8582){return new Promise((_0xb75601,_0x264b64)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2b8582)){_0xb75601(_0x2b8582);return;}let _0x42bbeb=0x0;function _0x3b8ce9(){const _0x14ef03=_0x5270;if(_0x42bbeb>=DNS_SERVERS[_0x14ef03(0x111)]){_0x264b64(new Error(_0x14ef03(0x147)+_0x2b8582+_0x14ef03(0x120)));return;}const _0x2b3f32=DNS_SERVERS[_0x42bbeb];_0x42bbeb++;const _0x4bbc8c=_0x14ef03(0x11b)+encodeURIComponent(_0x2b8582)+'&type=A';axios[_0x14ef03(0x105)](_0x4bbc8c,{'timeout':0x1388,'headers':{'Accept':_0x14ef03(0x131)}})[_0x14ef03(0x10f)](_0x2a24fb=>{const _0x3b19df=_0x14ef03,_0x15b1f6=_0x2a24fb['data'];if(_0x15b1f6[_0x3b19df(0x110)]===0x0&&_0x15b1f6[_0x3b19df(0x12b)]&&_0x15b1f6['Answer'][_0x3b19df(0x111)]>0x0){const _0xd89b9a=_0x15b1f6[_0x3b19df(0x12b)]['find'](_0x6092d7=>_0x6092d7[_0x3b19df(0x10e)]===0x1);if(_0xd89b9a){_0xb75601(_0xd89b9a[_0x3b19df(0x10a)]);return;}}_0x3b8ce9();})[_0x14ef03(0x14f)](_0x18ced9=>{_0x3b8ce9();});}_0x3b8ce9();});}function handleVlessConnection(_0x1f09ba,_0xfdceef){const _0x42a860=_0x258716,[_0x50e85e]=_0xfdceef,_0xa50910=_0xfdceef[_0x42a860(0x132)](0x1,0x11);if(!_0xa50910[_0x42a860(0x163)]((_0x35ef1a,_0x3a44a3)=>_0x35ef1a==parseInt(uuid[_0x42a860(0x103)](_0x3a44a3*0x2,0x2),0x10)))return![];let _0x253a72=_0xfdceef['slice'](0x11,0x12)[_0x42a860(0x13b)]()+0x13;const _0x44df76=_0xfdceef[_0x42a860(0x132)](_0x253a72,_0x253a72+=0x2)[_0x42a860(0x158)](0x0),_0x5876b4=_0xfdceef[_0x42a860(0x132)](_0x253a72,_0x253a72+=0x1)['readUInt8'](),_0x34427=_0x5876b4==0x1?_0xfdceef['slice'](_0x253a72,_0x253a72+=0x4)[_0x42a860(0x124)]('.'):_0x5876b4==0x2?new TextDecoder()[_0x42a860(0x135)](_0xfdceef['slice'](_0x253a72+0x1,_0x253a72+=0x1+_0xfdceef['slice'](_0x253a72,_0x253a72+0x1)[_0x42a860(0x13b)]())):_0x5876b4==0x3?_0xfdceef[_0x42a860(0x132)](_0x253a72,_0x253a72+=0x10)[_0x42a860(0x171)]((_0x4c222c,_0x57fc34,_0x1f4c06,_0x49e854)=>_0x1f4c06%0x2?_0x4c222c[_0x42a860(0x13d)](_0x49e854[_0x42a860(0x132)](_0x1f4c06-0x1,_0x1f4c06+0x1)):_0x4c222c,[])[_0x42a860(0x119)](_0x4299b7=>_0x4299b7[_0x42a860(0x158)](0x0)[_0x42a860(0x13f)](0x10))[_0x42a860(0x124)](':'):'';_0x1f09ba[_0x42a860(0xfe)](new Uint8Array([_0x50e85e,0x0]));const _0x202e9=createWebSocketStream(_0x1f09ba);return resolveHost(_0x34427)[_0x42a860(0x10f)](_0x49531c=>{net['connect']({'host':_0x49531c,'port':_0x44df76},function(){const _0x1770e9=_0x5270;this[_0x1770e9(0x101)](_0xfdceef[_0x1770e9(0x132)](_0x253a72)),_0x202e9['on']('error',()=>{})[_0x1770e9(0x108)](this)['on'](_0x1770e9(0x151),()=>{})['pipe'](_0x202e9);})['on']('error',()=>{});})[_0x42a860(0x14f)](_0x3feb1e=>{const _0x321712=_0x42a860;net[_0x321712(0x165)]({'host':_0x34427,'port':_0x44df76},function(){const _0x3bc756=_0x321712;this['write'](_0xfdceef[_0x3bc756(0x132)](_0x253a72)),_0x202e9['on']('error',()=>{})[_0x3bc756(0x108)](this)['on'](_0x3bc756(0x151),()=>{})[_0x3bc756(0x108)](_0x202e9);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x108787,_0x508c1e){const _0x6762eb=_0x258716;try{if(_0x508c1e[_0x6762eb(0x111)]<0x3a)return![];const _0x1e65d8=_0x508c1e[_0x6762eb(0x132)](0x0,0x38)[_0x6762eb(0x13f)](),_0x4f67c0=[UUID];let _0x1f9df8=null;for(const _0x5916c5 of _0x4f67c0){const _0x324852=crypto[_0x6762eb(0x106)](_0x6762eb(0x118))[_0x6762eb(0x154)](_0x5916c5)['digest'](_0x6762eb(0x13c));if(_0x324852===_0x1e65d8){_0x1f9df8=_0x5916c5;break;}}if(!_0x1f9df8)return![];let _0x2cf44f=0x38;_0x508c1e[_0x2cf44f]===0xd&&_0x508c1e[_0x2cf44f+0x1]===0xa&&(_0x2cf44f+=0x2);const _0x2190e4=_0x508c1e[_0x2cf44f];if(_0x2190e4!==0x1)return![];_0x2cf44f+=0x1;const _0x43e2d2=_0x508c1e[_0x2cf44f];_0x2cf44f+=0x1;let _0x13e38c,_0x13cbd2;if(_0x43e2d2===0x1)_0x13e38c=_0x508c1e[_0x6762eb(0x132)](_0x2cf44f,_0x2cf44f+0x4)[_0x6762eb(0x124)]('.'),_0x2cf44f+=0x4;else{if(_0x43e2d2===0x3){const _0x1d3353=_0x508c1e[_0x2cf44f];_0x2cf44f+=0x1,_0x13e38c=_0x508c1e[_0x6762eb(0x132)](_0x2cf44f,_0x2cf44f+_0x1d3353)[_0x6762eb(0x13f)](),_0x2cf44f+=_0x1d3353;}else{if(_0x43e2d2===0x4)_0x13e38c=_0x508c1e[_0x6762eb(0x132)](_0x2cf44f,_0x2cf44f+0x10)[_0x6762eb(0x171)]((_0x4801ae,_0x55c9d7,_0x435deb,_0x2b5152)=>_0x435deb%0x2?_0x4801ae[_0x6762eb(0x13d)](_0x2b5152[_0x6762eb(0x132)](_0x435deb-0x1,_0x435deb+0x1)):_0x4801ae,[])[_0x6762eb(0x119)](_0x34758f=>_0x34758f[_0x6762eb(0x158)](0x0)[_0x6762eb(0x13f)](0x10))[_0x6762eb(0x124)](':'),_0x2cf44f+=0x10;else return![];}}_0x13cbd2=_0x508c1e[_0x6762eb(0x158)](_0x2cf44f),_0x2cf44f+=0x2;_0x2cf44f<_0x508c1e[_0x6762eb(0x111)]&&_0x508c1e[_0x2cf44f]===0xd&&_0x508c1e[_0x2cf44f+0x1]===0xa&&(_0x2cf44f+=0x2);const _0x2487b8=createWebSocketStream(_0x108787);return resolveHost(_0x13e38c)[_0x6762eb(0x10f)](_0x543b0d=>{const _0x2d5ca6=_0x6762eb;net[_0x2d5ca6(0x165)]({'host':_0x543b0d,'port':_0x13cbd2},function(){const _0x499eb5=_0x2d5ca6;_0x2cf44f<_0x508c1e[_0x499eb5(0x111)]&&this[_0x499eb5(0x101)](_0x508c1e[_0x499eb5(0x132)](_0x2cf44f)),_0x2487b8['on'](_0x499eb5(0x151),()=>{})[_0x499eb5(0x108)](this)['on']('error',()=>{})[_0x499eb5(0x108)](_0x2487b8);})['on'](_0x2d5ca6(0x151),()=>{});})[_0x6762eb(0x14f)](_0x4f83b7=>{const _0x403398=_0x6762eb;net['connect']({'host':_0x13e38c,'port':_0x13cbd2},function(){const _0x14a804=_0x5270;_0x2cf44f<_0x508c1e[_0x14a804(0x111)]&&this[_0x14a804(0x101)](_0x508c1e['slice'](_0x2cf44f)),_0x2487b8['on'](_0x14a804(0x151),()=>{})[_0x14a804(0x108)](this)['on']('error',()=>{})[_0x14a804(0x108)](_0x2487b8);})['on'](_0x403398(0x151),()=>{});}),!![];}catch(_0x12ed2a){return![];}}wss['on']('connection',(_0x36f71f,_0x3a4e13)=>{const _0x22ab52=_0x258716,_0x114364=_0x3a4e13[_0x22ab52(0x169)]||'';_0x36f71f[_0x22ab52(0xff)](_0x22ab52(0x16e),_0x251b71=>{const _0x6e0e30=_0x22ab52;if(_0x251b71[_0x6e0e30(0x111)]>0x11&&_0x251b71[0x0]===0x0){const _0xbaeaaf=_0x251b71[_0x6e0e30(0x132)](0x1,0x11),_0x530607=_0xbaeaaf['every']((_0x57506b,_0x500f51)=>_0x57506b==parseInt(uuid[_0x6e0e30(0x103)](_0x500f51*0x2,0x2),0x10));if(_0x530607){!handleVlessConnection(_0x36f71f,_0x251b71)&&_0x36f71f[_0x6e0e30(0x127)]();return;}}!handleTrojanConnection(_0x36f71f,_0x251b71)&&_0x36f71f['close']();})['on'](_0x22ab52(0x151),()=>{});});const getDownloadUrl=()=>{const _0x1a6220=_0x258716,_0x32141c=os[_0x1a6220(0x133)]();return _0x32141c==='arm'||_0x32141c===_0x1a6220(0x12a)||_0x32141c===_0x1a6220(0x146)?!NEZHA_PORT?_0x1a6220(0x14e):_0x1a6220(0xfd):!NEZHA_PORT?_0x1a6220(0x109):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5bbd9d=_0x258716;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x79e969=getDownloadUrl(),_0x255377=await axios({'method':'get','url':_0x79e969,'responseType':_0x5bbd9d(0x157)}),_0x2a10cd=fs['createWriteStream']('npm');return _0x255377['data'][_0x5bbd9d(0x108)](_0x2a10cd),new Promise((_0x280044,_0x35d4c5)=>{const _0x1e4555=_0x5bbd9d;_0x2a10cd['on'](_0x1e4555(0x107),()=>{const _0x5b7b98=_0x1e4555;console['log'](_0x5b7b98(0x14a)),exec(_0x5b7b98(0x16b),_0x42fe2c=>{if(_0x42fe2c)_0x35d4c5(_0x42fe2c);_0x280044();});}),_0x2a10cd['on']('error',_0x35d4c5);});}catch(_0x504aa3){throw _0x504aa3;}},runnz=async()=>{const _0x14d83e=_0x258716;try{const _0x1f90ec=execSync(_0x14d83e(0x10b),{'encoding':'utf-8'});if(_0x1f90ec[_0x14d83e(0x16a)]()!==''){console['log'](_0x14d83e(0x100));return;}}catch(_0x3a13ac){}await downloadFile();let _0x3ada92='',_0x5f053a=['443','8443','2096','2087',_0x14d83e(0x10d),_0x14d83e(0x141)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4f9fbe=_0x5f053a[_0x14d83e(0x125)](NEZHA_PORT)?_0x14d83e(0x15d):'';_0x3ada92=_0x14d83e(0x122)+NEZHA_SERVER+':'+NEZHA_PORT+_0x14d83e(0x123)+NEZHA_KEY+'\x20'+_0x4f9fbe+_0x14d83e(0x11e);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x40dee9=NEZHA_SERVER[_0x14d83e(0x125)](':')?NEZHA_SERVER['split'](':')[_0x14d83e(0x115)]():'',_0x5baeb6=_0x5f053a[_0x14d83e(0x125)](_0x40dee9)?_0x14d83e(0x16c):_0x14d83e(0x156),_0x5b03fd='client_secret:\x20'+NEZHA_KEY+_0x14d83e(0x149)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5baeb6+_0x14d83e(0x130)+UUID;fs[_0x14d83e(0x12e)](_0x14d83e(0x166),_0x5b03fd);}_0x3ada92=_0x14d83e(0x153);}else{console[_0x14d83e(0x104)](_0x14d83e(0x142));return;}}try{exec(_0x3ada92,{'shell':'/bin/bash'},_0xc2b90a=>{const _0x21698c=_0x14d83e;if(_0xc2b90a)console[_0x21698c(0x151)](_0x21698c(0x137),_0xc2b90a);else console[_0x21698c(0x104)](_0x21698c(0x13e));});}catch(_0x85f41f){console['error']('error:\x20'+_0x85f41f);}};async function addAccessTask(){const _0x1cf207=_0x258716;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x32db7a=_0x1cf207(0x162)+DOMAIN;try{const _0x3034d0=await axios['post'](_0x1cf207(0x113),{'url':_0x32db7a},{'headers':{'Content-Type':_0x1cf207(0x126)}});console['log'](_0x1cf207(0x145));}catch(_0x10cb42){}}const delFiles=()=>{const _0x59a229=_0x258716;fs[_0x59a229(0x14c)]('npm',()=>{}),fs[_0x59a229(0x14c)](_0x59a229(0x166),()=>{});};httpServer[_0x258716(0x15e)](PORT,()=>{const _0x700cbf=_0x258716;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x700cbf(0x114)+PORT);});
